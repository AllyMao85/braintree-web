!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.braintree||(e.braintree={})).client=t()}}(function(){return function t(e,n,o){function r(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return r(n?n:t)},c,c.exports,t,e,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(t,e,n){"use strict";function o(t){var e,n;if(t=t||{},e=JSON.stringify(t),n=t.gatewayConfiguration,!n)throw new a({type:a.types.INTERNAL,message:"Missing gatewayConfiguration."});["assetsUrl","clientApiUrl","configUrl"].forEach(function(t){if(t in n&&!i(n[t]))throw new a({type:a.types.MERCHANT,message:"Invalid "+t+"."})}),this.getConfiguration=function(){return JSON.parse(e)},this._request=r,this._baseUrl=t.gatewayConfiguration.clientApiUrl+"/v1/",this._configuration=this.getConfiguration(),this.toJSON=this.getConfiguration}var r=t("./request"),i=t("../lib/is-whitelisted-domain"),a=t("../lib/error"),s=t("../lib/add-metadata"),u=t("../lib/deferred");o.prototype.request=function(t,e){var n;return t.method?t.endpoint||(n="options.endpoint is required."):n="options.method is required.",n?(e=u(e),void e(new a({type:a.types.MERCHANT,message:n}))):void this._request({url:this._baseUrl+t.endpoint,method:t.method,data:s(this._configuration,t.data),timeout:t.timeout},e)},e.exports=o},{"../lib/add-metadata":12,"../lib/deferred":15,"../lib/error":17,"../lib/is-whitelisted-domain":18,"./request":7}],2:[function(t,e,n){(function(n){"use strict";function o(t,e){var o,f,c,l,d=a(),p={merchantAppId:n.location.host,platform:s.PLATFORM,sdkVersion:s.VERSION,source:s.SOURCE,integration:s.INTEGRATION,integrationType:s.INTEGRATION,sessionId:d};try{f=u(t.authorization)}catch(y){return void e(new r({type:r.types.MERCHANT,message:"Authorization is invalid. Make sure your client token or tokenization key is valid."}))}c=f.attrs,l=f.configUrl,c._meta=p,c.braintreeLibraryVersion=s.BRAINTREE_LIBRARY_VERSION,i({url:l,method:"GET",data:c},function(n,i){return n?void e(new r({type:r.types.NETWORK,message:"Cannot contact the gateway at this time.",details:n})):(o={authorization:t.authorization,analyticsMetadata:p,gatewayConfiguration:i},void e(null,o))})}var r=t("../lib/error"),i=t("./request"),a=t("../lib/uuid"),s=t("../lib/constants"),u=t("../lib/create-authorization-data");e.exports={getConfiguration:o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lib/constants":13,"../lib/create-authorization-data":14,"../lib/error":17,"../lib/uuid":22,"./request":7}],3:[function(t,e,n){"use strict";function o(t,e){if("function"!=typeof e)throw new r({type:r.types.MERCHANT,message:"create must include a callback function."});return e=u(e),t.authorization?void a(t,function(t,n){var o;if(t)return void e(t);try{o=new i(n)}catch(r){return void e(r)}e(null,o)}):void e(new r({type:r.types.MERCHANT,message:"options.authorization is required."}))}var r=t("../lib/error"),i=t("./client"),a=t("./get-configuration").getConfiguration,s="3.0.0-beta.8",u=t("../lib/deferred");e.exports={create:o,VERSION:s}},{"../lib/deferred":15,"../lib/error":17,"./client":1,"./get-configuration":2}],4:[function(t,e,n){(function(n){"use strict";function o(){return f?new XMLHttpRequest:new XDomainRequest}function r(t,e){var n,r,c=(t.method||"GET").toUpperCase(),l=t.url,d=t.data||{},p=null==t.timeout?6e4:t.timeout,y=o();e=e||function(){},"GET"===c&&(l=i.queryify(l,d),d=null),f?y.onreadystatechange=function(){4===y.readyState&&(n=y.status,r=s(y.responseText),n>=400||0===n?e(r||{errors:u.errors.UNKNOWN_ERROR},null,500):n>0&&e(null,r,n))}:(y.onload=function(){e(null,s(y.responseText),y.status)},y.onerror=function(){e(y.responseText,null,y.status)},y.onprogress=function(){},y.ontimeout=function(){e(u.errors.TIMEOUT_ERROR,null,500)}),y.open(c,l,!0),y.timeout=p,f&&"POST"===c&&y.setRequestHeader("Content-Type","application/json"),setTimeout(function(){y.send(a(c,d))},1)}var i=t("../../lib/querystring"),a=t("./prep-body"),s=t("./parse-body"),u=t("./constants"),f=n.XMLHttpRequest&&"withCredentials"in new n.XMLHttpRequest;e.exports={request:r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../lib/querystring":21,"./constants":5,"./parse-body":10,"./prep-body":11}],5:[function(t,e,n){e.exports={errors:{UNKNOWN_ERROR:"Unknown error",TIMEOUT_ERROR:"Request timed out waiting for a reply",INVALID_TIMEOUT:"Timeout must be a number"}}},{}],6:[function(t,e,n){(function(t){"use strict";e.exports=function(){return t.navigator.userAgent}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,e,n){"use strict";var o=t("./jsonp-driver"),r=t("./ajax-driver"),i=t("./get-user-agent"),a=t("./is-http"),s=!(a()&&/MSIE\s(8|9)/.test(i()));s?e.exports=function(){r.request.apply(null,arguments)}:e.exports=function(){o.request.apply(null,arguments)}},{"./ajax-driver":4,"./get-user-agent":6,"./is-http":8,"./jsonp-driver":9}],8:[function(t,e,n){(function(t){"use strict";e.exports=function(){return"http:"===t.location.protocol}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(t,e,n){(function(n){"use strict";function o(){}function r(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function i(t,e){var o=document.createElement("script"),r=!1;return o.src=t,o.async=!0,o.onerror=function(){n[e]({message:l.errors.UNKNOWN_ERROR,status:500})},o.onload=o.onreadystatechange=function(){r||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(r=!0,o.onload=o.onreadystatechange=null)},o}function a(t){try{delete n[t]}catch(e){n[t]=null}}function s(t,e){y[e]=setTimeout(function(){y[e]=null,n[e]({error:l.errors.TIMEOUT_ERROR,status:500}),n[e]=function(){a(e)}},t)}function u(t,e,i){e=e||o,n[i]=function(n){var o=n.status||500,s=null,u=null;delete n.status,o>=400?s=n:u=n,a(i),r(t),clearTimeout(y[i]),e(s,u,o)}}function f(t,e){var n,o="callback_json_"+d().replace(/-/g,""),r=t.url,a=t.data,f=(t.method||"GET").toUpperCase(),l=null==t.timeout?6e4:t.timeout;r=p.queryify(r,a),r=p.queryify(r,{_method:f,callback:o}),n=i(r,o),u(n,e,o),s(l,o),c||(c=document.getElementsByTagName("head")[0]),c.appendChild(n)}var c,l=t("./constants"),d=t("../../lib/uuid"),p=t("../../lib/querystring"),y={};e.exports={request:f}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../lib/querystring":21,"../../lib/uuid":22,"./constants":5}],10:[function(t,e,n){"use strict";e.exports=function(t){try{t=JSON.parse(t)}catch(e){}return t}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){if("string"!=typeof t)throw new Error("Method must be a string");return"get"!==t.toLowerCase()&&null!=e&&(e="string"==typeof e?e:JSON.stringify(e)),e}},{}],12:[function(t,e,n){"use strict";function o(t,e){var n,o=e?i(e):{},s=r(t.authorization).attrs,u=i(t.analyticsMetadata);o.braintreeLibraryVersion=a.BRAINTREE_LIBRARY_VERSION;for(n in o._meta)o._meta.hasOwnProperty(n)&&(u[n]=o._meta[n]);return o._meta=u,s.tokenizationKey?o.tokenizationKey=s.tokenizationKey:o.authorizationFingerprint=s.authorizationFingerprint,o}var r=t("./create-authorization-data"),i=t("./json-clone"),a=t("./constants");e.exports=o},{"./constants":13,"./create-authorization-data":14,"./json-clone":19}],13:[function(t,e,n){"use strict";var o="3.0.0-beta.8",r="web";e.exports={ANALYTICS_REQUEST_TIMEOUT_MS:2e3,INTEGRATION_TIMEOUT_MS:6e4,VERSION:o,INTEGRATION:"custom",SOURCE:"client",PLATFORM:r,BRAINTREE_LIBRARY_VERSION:"braintree/"+r+"/"+o}},{}],14:[function(t,e,n){"use strict";function o(t){return/^[a-zA-Z0-9]+_[a-zA-Z0-9]+_[a-zA-Z0-9_]+$/.test(t)}function r(t){var e=t.split("_"),n=e[0],o=e.slice(2).join("_");return{merchantId:o,environment:n}}function i(t){var e,n,i={attrs:{},configUrl:""};return o(t)?(n=r(t),i.attrs.tokenizationKey=t,i.configUrl=s[n.environment]+"/merchants/"+n.merchantId+"/client_api/v1/configuration"):(e=JSON.parse(a(t)),i.attrs.authorizationFingerprint=e.authorizationFingerprint,i.configUrl=e.configUrl),i}var a=t("../lib/polyfill").atob,s={production:"https://api.braintreegateway.com:443",sandbox:"https://api.sandbox.braintreegateway.com:443"};e.exports=i},{"../lib/polyfill":20}],15:[function(t,e,n){"use strict";e.exports=function(t){return function(){var e=arguments;setTimeout(function(){t.apply(null,e)},1)}}},{}],16:[function(t,e,n){"use strict";function o(t,e){return e=null==e?"":e,t.reduce(function(t,n){return t[n]=e+n,t},{})}e.exports=o},{}],17:[function(t,e,n){"use strict";function o(t){if(!o.types.hasOwnProperty(t.type))throw new Error(t.type+" is not a valid type.");if(!t.message)throw new Error("Error message required.");this.message=t.message,this.type=t.type,this.details=t.details}var r=t("./enumerate");o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,o.types=r(["CUSTOMER","MERCHANT","NETWORK","INTERNAL","UNKNOWN"]),e.exports=o},{"./enumerate":16}],18:[function(t,e,n){"use strict";function o(t){var e,n;return t=t.toLowerCase(),/^https:/.test(t)?(r.href=t,e=r.hostname.split("."),n=e.slice(-2).join("."),i.hasOwnProperty(n)):!1}var r=document.createElement("a"),i={"paypal.com":1,"braintreepayments.com":1,"braintreegateway.com":1,localhost:1};e.exports=o},{}],19:[function(t,e,n){"use strict";e.exports=function(t){return JSON.parse(JSON.stringify(t))}},{}],20:[function(t,e,n){(function(t){"use strict";function n(t){var e,n,o,r,i,a,s,u,f=new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})([=]{1,2})?$"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="";if(!f.test(t))throw new Error("Non base64 encoded input passed to window.atob polyfill");u=0;do r=c.indexOf(t.charAt(u++)),i=c.indexOf(t.charAt(u++)),a=c.indexOf(t.charAt(u++)),s=c.indexOf(t.charAt(u++)),e=(63&r)<<2|i>>4&3,n=(15&i)<<4|a>>2&15,o=(3&a)<<6|63&s,l+=String.fromCharCode(e)+(n?String.fromCharCode(n):"")+(o?String.fromCharCode(o):"");while(u<t.length);return l}var o="function"==typeof t.atob?t.atob:n;e.exports={atob:o,_atob:n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(t,e,n){(function(t){"use strict";function n(t){var e;for(e in t)if(t.hasOwnProperty(e))return!0;return!1}function o(t){return t&&"object"==typeof t&&"number"==typeof t.length&&"[object Array]"===Object.prototype.toString.call(t)||!1}function r(e){var n,o;return e=e||t.location.href,/\?/.test(e)?(n=e.replace(/#.*$/,"").replace(/^.*\?/,"").split("&"),o=n.reduce(function(t,e){var n=e.split("="),o=decodeURIComponent(n[0]),r=decodeURIComponent(n[1]);return t[o]=r,t},{})):{}}function i(t,e){var n,r,a,s=[];for(a in t)t.hasOwnProperty(a)&&(r=t[a],n=e?o(t)?e+"[]":e+"["+a+"]":a,"object"==typeof r?s.push(i(r,n)):s.push(encodeURIComponent(n)+"="+encodeURIComponent(r)));return s.join("&")}function a(t,e){return t=t||"",null!=e&&"object"==typeof e&&n(e)&&(t+=-1===t.indexOf("?")?"?":"",t+=-1!==t.indexOf("=")?"&":"",t+=i(e)),t}e.exports={parse:r,stringify:i,queryify:a}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],22:[function(t,e,n){"use strict";function o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)})}e.exports=o},{}]},{},[3])(3)});
