!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.braintree||(e.braintree={})).client=t()}}(function(){return function t(e,n,r){function o(a,u){if(!n[a]){if(!e[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return o(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){(function(n){"use strict";function r(){return f?new XMLHttpRequest:new XDomainRequest}function o(t,e,n,r,o){var i=u.createURLParams(t,e);a("GET",i,null,n,r,o)}function i(t,e,n,r,o){a("POST",t,e,n,r,o)}function a(t,e,n,o,i,a){var u,d,p=r();i=i||function(){},f?p.onreadystatechange=function(){4===p.readyState&&(u=p.status,d=l(p.responseText),u>=400||0===u?i.call(null,d||{errors:c.errors.UNKNOWN_ERROR},null):u>0&&i.call(null,null,o(d)))}:(p.onload=function(){i.call(null,null,o(l(p.responseText)))},p.onerror=function(){i.call(null,p.responseText,null)},p.onprogress=function(){},p.ontimeout=function(){i.call(null,{errors:c.errors.UNKNOWN_ERROR},null)}),p.open(t,e,!0),p.timeout=null==a?6e4:a,f&&"POST"===t&&p.setRequestHeader("Content-Type","application/json"),setTimeout(function(){p.send(s(t,n))},0)}var u=t("./util"),s=t("./prep-body"),l=t("./parse-body"),c=t("./constants"),f=n.XMLHttpRequest&&"withCredentials"in new n.XMLHttpRequest;e.exports={get:o,post:i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./constants":3,"./parse-body":6,"./prep-body":7,"./util":8}],2:[function(t,e,n){"use strict";function r(t){var e=a.getUserAgent(),n=!(a.isHTTP()&&/(MSIE\s(8|9))|(Phantom)/.test(e));return t=t||{},t.enableCORS&&n?i:o}var o=t("./jsonp-driver"),i=t("./ajax-driver"),a=t("./util");e.exports=r},{"./ajax-driver":1,"./jsonp-driver":4,"./util":8}],3:[function(t,e,n){e.exports={errors:{UNKNOWN_ERROR:"Unknown error",INVALID_TIMEOUT:"Timeout must be a number"}}},{}],4:[function(t,e,n){"use strict";function r(t,e){return t.status>=400?[t,null]:[null,e(t)]}function o(){}function i(t,e,n,i,a,u){var s;a=a||o,null==u&&(u=6e4),s=i(t,e,function(t,e,o){c[o]&&(clearTimeout(c[o]),t?a.call(null,t):a.apply(null,r(e,function(t){return n(t)})))}),"number"==typeof u?c[s]=setTimeout(function(){c[s]=null,a.apply(null,[{errors:l.errors.UNKNOWN_ERROR},null])},u):a.apply(null,[{errors:l.errors.INVALID_TIMEOUT},null])}function a(t,e,n,r,o){e._method="POST",i(t,e,n,s.get,r,o)}function u(t,e,n,r,o){i(t,e,n,s.get,r,o)}var s=t("./jsonp"),l=t("./constants"),c=[];e.exports={get:u,post:a}},{"./constants":3,"./jsonp":5}],5:[function(t,e,n){(function(n){"use strict";function r(t,e){var n=document.createElement("script"),r=!1;n.src=t,n.async=!0;var o=e||l.error;"function"==typeof o&&(n.onerror=function(e){o({url:t,event:e})}),n.onload=n.onreadystatechange=function(){r||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(r=!0,n.onload=n.onreadystatechange=null,n&&n.parentNode&&n.parentNode.removeChild(n))},a||(a=document.getElementsByTagName("head")[0]),a.appendChild(n)}function o(t,e,n,o){var i,a;return o=o||l.callbackName||"callback",a=o+"_json"+u.generateUUID(),e[o]=a,i=u.createURLParams(t,e),s[a]=function(t){n(null,t,a);try{delete s[a]}catch(e){}s[a]=null},r(i,function(t){n(t,null,a)}),a}function i(t){l=t}var a,u=t("./util"),s=n,l={};e.exports={get:o,init:i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./util":8}],6:[function(t,e,n){"use strict";e.exports=function(t){try{t=JSON.parse(t)}catch(e){}return t}},{}],7:[function(t,e,n){"use strict";e.exports=function(t,e){if("string"!=typeof t)throw new Error("Method must be a string");return"get"!==t.toLowerCase()&&null!=e&&(e="string"==typeof e?e:JSON.stringify(e)),e}},{}],8:[function(t,e,n){(function(t){"use strict";function n(t){var e;for(e in t)if(t.hasOwnProperty(e))return!0;return!1}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&"[object Array]"===Object.prototype.toString.call(t)||!1}function o(t,e){var n,i,a,u=[];for(a in t)t.hasOwnProperty(a)&&(i=t[a],n=e?r(t)?e+"[]":e+"["+a+"]":a,"object"==typeof i?u.push(o(i,n)):u.push(encodeURIComponent(n)+"="+encodeURIComponent(i)));return u.join("&")}function i(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.floor(16*Math.random()),n="x"===t?e:3&e|8;return n.toString(16)})}function a(t,e){return t=t||"",null!=e&&"object"==typeof e&&n(e)&&(t+=-1===t.indexOf("?")?"?":"",t+=-1!==t.indexOf("=")?"&":"",t+=o(e)),t}function u(){return t.navigator.userAgent}function s(){return"http:"===t.location.protocol}e.exports={isArray:r,generateUUID:i,stringify:o,createURLParams:a,getUserAgent:u,isHTTP:s}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(t,e,n){"use strict";var r=t("./lib/ajax-driver"),o=t("./lib/jsonp-driver"),i=t("./lib/choose-driver"),a=t("./lib/util");e.exports={AJAXDriver:r,JSONPDriver:o,chooseDriver:i,util:a}},{"./lib/ajax-driver":1,"./lib/choose-driver":2,"./lib/jsonp-driver":4,"./lib/util":8}],10:[function(t,e,n){"use strict";function r(t){return t}function o(t){var e,n;if(t=t||{},e=JSON.stringify(t),n=t.gatewayConfiguration,!n)throw new u({type:u.types.INTERNAL,message:"Missing gatewayConfiguration."});["assetsUrl","clientApiUrl","configUrl"].forEach(function(t){if(t in n&&!a(n[t]))throw new u({type:u.types.MERCHANT,message:"Invalid "+t+"."})}),this.getConfiguration=function(){return JSON.parse(e)},this._driver=i({enableCORS:!0}),this._baseUrl=t.gatewayConfiguration.clientApiUrl+"/v1/",this._configuration=this.getConfiguration(),this.toJSON=this.getConfiguration}var i=t("braintree-request").chooseDriver,a=t("../lib/is-whitelisted-domain"),u=t("../lib/error"),s=t("../lib/add-metadata"),l=t("../lib/deferred");o.prototype.request=function(t,e){var n;return t.method?t.endpoint||(n="options.endpoint is required."):n="options.method is required.",n?(e=l(e),void e(new u({type:u.types.MERCHANT,message:n}))):void this._driver[t.method](this._baseUrl+t.endpoint,s(this._configuration,t.data),r,e,t.timeout)},e.exports=o},{"../lib/add-metadata":13,"../lib/deferred":16,"../lib/error":18,"../lib/is-whitelisted-domain":19,"braintree-request":9}],11:[function(t,e,n){(function(n){"use strict";function r(t,e){var r,l,c,f,d=a(),p={merchantAppId:n.location.host,platform:u.PLATFORM,sdkVersion:u.VERSION,source:u.SOURCE,integration:u.INTEGRATION,integrationType:u.INTEGRATION,sessionId:d};try{l=s(t.authorization)}catch(y){return void e(new o({type:o.types.MERCHANT,message:"Authorization is invalid. Make sure your client token or tokenization key is valid."}))}c=l.attrs,f=l.configUrl,c._meta=p,c.braintreeLibraryVersion=u.BRAINTREE_LIBRARY_VERSION,i({enableCORS:!0}).get(f,c,function(t){return t},function(n,o){return n?void e(n):(r={authorization:t.authorization,analyticsMetadata:p,gatewayConfiguration:o},void e(null,r))})}var o=t("../lib/error"),i=t("braintree-request").chooseDriver,a=t("../lib/uuid"),u=t("../lib/constants"),s=t("../lib/create-authorization-data");e.exports={getConfiguration:r}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lib/constants":14,"../lib/create-authorization-data":15,"../lib/error":18,"../lib/uuid":22,"braintree-request":9}],12:[function(t,e,n){"use strict";function r(t,e){if("function"!=typeof e)throw new o({type:o.types.MERCHANT,message:"create must include a callback function."});return e=s(e),t.authorization?void a(t,function(t,n){var r;if(null!=t)return void e("Unknown error"===t.errors?new o({type:o.types.NETWORK,message:"Cannot contact the gateway at this time."}):t);try{r=new i(n)}catch(a){return void e(a)}e(null,r)}):void e(new o({type:o.types.MERCHANT,message:"options.authorization is required."}))}var o=t("../lib/error"),i=t("./client"),a=t("./get-configuration").getConfiguration,u="3.0.0-beta.7",s=t("../lib/deferred");e.exports={create:r,VERSION:u}},{"../lib/deferred":16,"../lib/error":18,"./client":10,"./get-configuration":11}],13:[function(t,e,n){"use strict";function r(t,e){var n,r=e?i(e):{},u=o(t.authorization).attrs,s=i(t.analyticsMetadata);r.braintreeLibraryVersion=a.BRAINTREE_LIBRARY_VERSION;for(n in r._meta)r._meta.hasOwnProperty(n)&&(s[n]=r._meta[n]);return r._meta=s,u.clientKey?r.clientKey=u.clientKey:r.authorizationFingerprint=u.authorizationFingerprint,r}var o=t("./create-authorization-data"),i=t("./json-clone"),a=t("./constants");e.exports=r},{"./constants":14,"./create-authorization-data":15,"./json-clone":20}],14:[function(t,e,n){"use strict";var r="3.0.0-beta.7",o="web";e.exports={ANALYTICS_REQUEST_TIMEOUT_MS:2e3,INTEGRATION_TIMEOUT_MS:6e4,VERSION:r,INTEGRATION:"custom",SOURCE:"client",PLATFORM:o,BRAINTREE_LIBRARY_VERSION:"braintree/"+o+"/"+r}},{}],15:[function(t,e,n){"use strict";function r(t){return/^[a-zA-Z0-9]+_[a-zA-Z0-9]+_[a-zA-Z0-9_]+$/.test(t)}function o(t){var e=t.split("_"),n=e[0],r=e.slice(2).join("_");return{merchantId:r,environment:n}}function i(t){var e,n,i={attrs:{},configUrl:""};return r(t)?(n=o(t),i.attrs.clientKey=t,i.configUrl=u[n.environment]+"/merchants/"+n.merchantId+"/client_api/v1/configuration"):(e=JSON.parse(a(t)),i.attrs.authorizationFingerprint=e.authorizationFingerprint,i.configUrl=e.configUrl),i}var a=t("../lib/polyfill").atob,u={production:"https://api.braintreegateway.com:443",sandbox:"https://api.sandbox.braintreegateway.com:443"};e.exports=i},{"../lib/polyfill":21}],16:[function(t,e,n){"use strict";e.exports=function(t){return function(){var e=arguments;setTimeout(function(){t.apply(null,e)},1)}}},{}],17:[function(t,e,n){"use strict";function r(t,e){return e=null==e?"":e,t.reduce(function(t,n){return t[n]=e+n,t},{})}e.exports=r},{}],18:[function(t,e,n){"use strict";function r(t){if(!r.types.hasOwnProperty(t.type))throw new Error(t.type+" is not a valid type.");if(!t.message)throw new Error("Error message required.");this.message=t.message,this.type=t.type,this.details=t.details}var o=t("./enumerate");r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r.types=o(["CUSTOMER","MERCHANT","NETWORK","INTERNAL","UNKNOWN"]),e.exports=r},{"./enumerate":17}],19:[function(t,e,n){"use strict";function r(t){var e,n;return t=t.toLowerCase(),/^http/.test(t)?(o.href=t,e=o.hostname.split("."),n=e.slice(-2).join("."),i.hasOwnProperty(n)):!1}var o=document.createElement("a"),i={"paypal.com":1,"braintreepayments.com":1,"braintreegateway.com":1,localhost:1};e.exports=r},{}],20:[function(t,e,n){"use strict";e.exports=function(t){return JSON.parse(JSON.stringify(t))}},{}],21:[function(t,e,n){(function(t){"use strict";function n(t){var e,n,r,o,i,a,u,s,l=new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{4})([=]{1,2})?$"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f="";if(!l.test(t))throw new Error("Non base64 encoded input passed to window.atob polyfill");s=0;do o=c.indexOf(t.charAt(s++)),i=c.indexOf(t.charAt(s++)),a=c.indexOf(t.charAt(s++)),u=c.indexOf(t.charAt(s++)),e=(63&o)<<2|i>>4&3,n=(15&i)<<4|a>>2&15,r=(3&a)<<6|63&u,f+=String.fromCharCode(e)+(n?String.fromCharCode(n):"")+(r?String.fromCharCode(r):"");while(s<t.length);return f}var r="function"==typeof t.atob?t.atob:n;e.exports={atob:r,_atob:n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],22:[function(t,e,n){"use strict";function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"===t?e:3&e|8;return n.toString(16)})}e.exports=r},{}]},{},[12])(12)});
